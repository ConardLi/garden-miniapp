<view class="container">
  <!-- 选择图片区域 -->
  <view class="image-section" bindtap="chooseImage" wx:if="{{!imageUrl}}">
    <view class="upload-box">
      <view class="upload-icon"></view>
      <text class="upload-text">点击选择图片</text>
    </view>
  </view>

  <!-- 图片处理区域 -->
  <view class="image-process" wx:if="{{imageUrl}}">
    <!-- 原图 -->
    <view class="image-box">
      <text class="image-title">原图</text>
      <image 
        class="preview-image" 
        src="{{imageUrl}}" 
        mode="aspectFit"
        data-src="{{imageUrl}}"
        bindtap="previewImage"
      />
      <text class="image-info">{{imageInfo.width}} x {{imageInfo.height}}</text>
    </view>

    <!-- 处理后的图片 -->
    <view class="image-box" wx:if="{{processedImageUrl}}">
      <text class="image-title">处理结果</text>
      <image 
        class="preview-image" 
        src="{{processedImageUrl}}" 
        mode="aspectFit"
        data-src="{{processedImageUrl}}"
        bindtap="previewImage"
      />
      <text class="image-info">{{processedImageInfo.width}} x {{processedImageInfo.height}}</text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="button-group">
    <button 
      class="action-button"
      type="primary" 
      disabled="{{!imageUrl || isProcessing}}"
      loading="{{isProcessing}}"
      bindtap="processImage"
    >
      {{isProcessing ? '处理中...' : '开始处理'}}
    </button>

    <button 
      class="action-button"
      type="default" 
      disabled="{{!processedImageUrl}}"
      bindtap="saveImage"
    >
      保存到相册
    </button>

    <button 
      class="action-button"
      type="default" 
      bindtap="chooseImage"
    >
      重新选择
    </button>
  </view>
</view>